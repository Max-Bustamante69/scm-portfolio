---
import SkillTag from "./SkillTag.astro";
import GradientBorder from "./GradientBorder.astro";
import { Icon } from "astro-icon/components";
import type { CollectionEntry } from "astro:content";

type Experience = CollectionEntry<"experiences">;

type ExperienceCardProps = Experience["data"] & {
  class?: string;
};

const {
  jobTitle,
  companyName,
  startDate,
  endDate,
  skills,
  description,
  icon,
  class: className = "",
  ...rest
} = Astro.props as ExperienceCardProps;
---

<article class:list={["experience-card h-full", className]} {...rest}>
  <GradientBorder blur>
    <div
      class="size-full border border-accent/30 bg-card-background flex flex-col align-center px-8 py-6 gap-10 shadow-lg"
    >
      <header class="flex items-center gap-4">
        <div
          class="hidden md:block size-14 md:flex md:items-center md:justify-center rounded-full bg-accent/10"
        >
          {
            icon ? (
              <Icon size={28} name={icon} />
            ) : (
              <div class="size-full bg-accent/10 rounded-full" />
            )
          }
        </div>
        <div>
          <h4 class="font-bold text-wrap">{jobTitle}</h4>
          <p class="text-subtext">
            {companyName} â€¢ {startDate} - {endDate}
          </p>
        </div>
      </header>
      <p class="mb-4 text-text whitespace-pre-line">
        {description?.replaceAll("\n", "\n\n")}
      </p>
      <section class="flex flex-col gap-2 align-start">
        <p class="mb-2 font-semibold text-white">Skills & Technologies</p>
        <ul class="flex flex-wrap gap-2">
          {
            skills?.map((skill) => (
              <li>
                <SkillTag>{skill}</SkillTag>
              </li>
            ))
          }
        </ul>
      </section>
    </div>
  </GradientBorder>
</article>
